app.factory("envService",["$rootScope","$timeout","$location","$anchorScroll",function(e,r,t,a){e.anchorScroll=a;for(var o=[],n=0;10>n;n++)o.push({"background-color":"none"});for(var s=[{transform:"none"},{transform:"perspective( 450px ) rotateX(55deg) rotateZ(90deg) translateX(-200px)"},{transform:"perspective( 500px) rotateX(50deg) rotateZ(0deg) translateY(-100px) scaleX(0.9)"},{transform:"perspective( 450px ) rotateX(55deg) rotateZ(-90deg) translateX(200px)"},{transform:"perspective( 500px) rotateX(50deg) rotateZ(180deg) translateY(100px) scaleX(0.9)"}],l={"background-color":"none",background:"url('./images/ball.png')","background-position":"-4px -4px","background-size":"47px 47px"},_=[["147009_757575757575757575_2y2y2y2y2y2y2y2y2y_3b3b3b3b3b3b3b3b3b_3f3f3f3f3f3f3f3f3f_8q8q8q8q8q8q8q8q8q_tDtDt9t9sot9t9t9tb_p9p9qnpDp9p9p9p9p9_t3t3t3skt3t3t3t3t3_pgpgpgpgpIqrpIpIq0_rarar8rBrDrararara_r9qjqkqlqlqlqlqlr9","basketball","Free Throw"],["082007_5f5f5f5f_5q5q5q5q_72727272_0n0n1717_89898989_2m3B3B3B_8H8e8e8e_r1r1r1qg_qHqHqepu_sbsbsbsb_p4pypypy_rrrrrrqI_sIsIsIsI_totototo_rnrnnwsf","arenasoccer","Free Kick"],["106066_9m9m9m9m9m8A84_5m5o4F4F4F4946_505r5r6e6i6e6b_0s0s0s0s0s1714_aFaFaFaFaFaC9m_qGrpqEq9q9qAqw_nAnAnAp3qhqiqi_vovovoubtrtrsH_rms7s7rorqrnqB_u7u7u7u7u7u7u5_rjs4qCsbruruqh","basketball","Pick n Roll"],["121076_5i484c4f5v6g6g_rtrtrtrtrtsdru_rfqyq9qFscsbr1","icehockey","Penalty Shot"],["107056_5959594o_3p3o3n3m_5h5h5i4z_262A2A2A_6w6w6w6u_0G0F1n24_9d9d9d8q_rtrtrsrr_s3rirhrg_oxoxoxpg_ocoDoDo8_uvuvuvth_xCx7xxyd_vbvbvbuq_oEoyrgnH","associationfootball","Basic Buildup"]],i={associationfootball:{"border-radius":"0px",background:"url('./images/turf4.jpg')","background-size":"50px 50px"},icehockey:{"border-radius":"100px",background:"url('./images/ice.png')","background-size":"200px 50px","margin-top":"28px","margin-bottom":"28px",height:"420px"},arenasoccer:{"border-radius":"130px",background:"url('./images/turf4.jpg')","background-size":"50px 50px"},basketball:{"border-radius":"0px",background:"url('./images/hardwood2.jpg')","background-size":"20% 20%"}},d=[],n=0;25>n;n++)d.push(n);var p={anchorScroll:a,ball_style:l,ball_rotation:[0,-1,0,1,2],conversion_array:["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I"],current_frame_index:0,current_3d_index:0,current_sport:"basketball",field_style:i.basketball,field_styles:i,field_styles_3d:s,frames:[0],frame_styles:o,frames_input:1,frames_input_validated:1,grid_size:[],grid_size_length:493,hoop_net_divs:d,load_menu_visible:!1,mode:"edit",modal_visible:!1,play_data_model:"",sample_plays:_,selected_player:null,team1_input:5,team2_input:5,team1_temp_color:"aquamarine",team2_temp_color:"lime",team1_preview:[],team2_preview:[],team1_temp_style:{},team2_temp_style:{},team1_temp_color_index:"003",team2_temp_color_index:"082",test:function(){console.log("testing")},default_positions1:[[2,8],[12,8],[10,8],[9,3],[9,13],[13,1],[13,15],[7,8],[12,5],[12,11],[13,3]],default_positions2:[[26,8],[16,8],[18,8],[19,3],[19,13],[15,1],[15,15],[21,8],[16,5],[16,11],[15,3]]};p.randomize=function(e,r){var t="team"+e+"_temp_color",a=Math.floor(148*Math.random());this[t]=r[a]},p.addZeroPadding=function(e){return 3!=(""+e).length?2==(""+e).length?"0"+e:"00"+e:e},p.toggleSelected=function(e){this.selected_player=this.selected_player===e?null:e},p.updateSelectedPlayer=function(e){var r=this.selected_player.frames[this.current_frame_index];if("ball"==p.selected_player.jersey_number)var t=p.current_sport;else var t=void 0;p.selected_player.current_style=new e.GeneratedStyle(r.posX,r.posY,this.selected_player.default_color,r.highlighted,t),"create"==this.mode&&this.flashFrames()},p.flashFrames=function(){for(var e=this.current_frame_index;this.frames.length>e;e++)(function(e){r(function(){p.frame_styles[e]={"background-color":"lightgray"}},30*(e-p.current_frame_index)),r(function(){p.frame_styles[e]={"background-color":"none"}},180+30*(e-p.current_frame_index))})(e)},p.moveSelectedPlayer=function(e,r){if(null!=p.selected_player){if("edit"==p.mode)p.selected_player.frames[p.current_frame_index].posX=e.posX,p.selected_player.frames[p.current_frame_index].posY=e.posY;else for(var t=p.current_frame_index;p.frames.length>t;t++)p.selected_player.frames[t].posX=e.posX,p.selected_player.frames[t].posY=e.posY;p.updateSelectedPlayer(r)}},p.toggleHighlighted=function(e){var r=p.selected_player.frames[p.current_frame_index].highlighted?!1:!0;if("edit"==p.mode)p.selected_player.frames[p.current_frame_index].highlighted=r;else for(var t=p.current_frame_index;p.frames.length>t;t++)p.selected_player.frames[t].highlighted=r;p.updateSelectedPlayer(e)},p.toggleMode=function(){p.mode="edit"==p.mode?"create":"edit"},p.toggleAnimationType=function(){},p.updatePreviewTeams=function(){var e=function(e,r,t){return isNaN(parseInt(e))||r>e?r:e>t?t:e},r=e(p.team1_input,1,11),t=e(p.team2_input,1,11),a=e(p.frames_input,1,10);p.team1_preview=[],p.team2_preview=[];for(var o=0;r>o;o++)p.team1_preview.push("");for(var o=0;t>o;o++)p.team2_preview.push("");p.team1_temp_style["background-color"]=p.team1_temp_color,p.team2_temp_style["background-color"]=p.team2_temp_color,p.frames_input_validated=a},p.save=function(e,r){e.compressPlay(p,r),t.search({play:p.play_data_model,s:p.current_sport})},p.load=function(e){p.current_frame_index=0,t.search({play:e[0],s:e[1]}),p.load_menu_visible=!1},p.changeSport=function(e,r){p.current_sport=e,p.field_style=p.field_styles[e],r[r.length-1].current_style["background-image"]="url('./images/"+e+".png')"},p.toggleLoadMenu=function(){p.load_menu_visible=1==p.load_menu_visible?!1:!0},p.toggle3d=function(e){p.current_3d_index=p.current_3d_index!=p.field_styles_3d.length-1?p.current_3d_index+1:0;for(var r=0;e.length>r;r++)e[r].transitionTo(p.current_frame_index)};for(var n=0;p.grid_size_length>n;n++)p.grid_size[n]={posX:n%29,posY:Math.floor(n/29)};return p}]);